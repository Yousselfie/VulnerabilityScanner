import socket
import constant


def scan_ports(domain):

    open_ports = []

    print(socket.gethostbyname(domain))

    # Basic socket port scanning
    for port in constant.ports_to_scan:
        # Connect to socket of target machine. We need the ip address and the port number we want to connect to.
        try:
            # Create a socket object
            # You can create a socket connection similar to opening a file in Python. 
            # We can change the code to allow for domain names as well.
            # With socket.AF_INET you can enter either a domain name or an ip address 
            # and it will then continue with the connection.
            with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
                # You want to set a timeout for the socket to try and connect to the server. 
                # If you make the duration longer it will return better results. 
                # We put it at 0.5s. So for every port it scans it will allow 0.5s 
                # for a successful connection.
                s.settimeout(0.5)
                # We use the socket object we created to connect to the ip address we entered 
                # and the port number. If it can't connect to this socket it will cause an 
                # exception and the open_ports list will not append the value.
                s.connect((socket.gethostbyname(domain), port))
                # If the following line runs then then it was successful in connecting to the port.
                open_ports.append(port)

        except:
            # We don't need to do anything here. If we were interested in the closed ports we'd put something here.
            pass

    return open_ports
